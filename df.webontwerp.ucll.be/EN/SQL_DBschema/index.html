<!DOCTYPE html>
<html lang="nl">
  
<!-- Mirrored from df.webontwerp.ucll.be/EN/SQL_DBschema/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Dec 2023 15:09:20 GMT -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/styles/stijl.css">
    <link rel="stylesheet" href="../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/vs2015.min.css">
    <script src="../../../cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
    <title>SQL: tool DBSchema</title>
  </head>

  <body>
    <header id="top">
      <div class="container">
        <nav>
          <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../leerpad/index.html"></a></li>
            <li><a href="../model_menu/index.html">Data modelling</a></li>
            <li><a href="../SQL_menu/index.html">SQL</a></li>
          </ul>
        </nav>
      </div>
    </header>
    
  <main>
    <blockquote>
      <p>
        <span class="citaat">Success is no accident. It is hard work, perseverance, learning,
          studying, sacrifice and most of all, love of what you are doing or
          learning to do.</span>
        <br>
        &mdash;Pele
      </p>
    </blockquote>
    <h1>DBSchema PostgreSQL client</h1>
    <p>
      We introduce a new tool: DBSchema. This database client does in
      broadly the same as pgAdmin: <em>communicate with the database server</em>. You will be able to use this tool well in the larger assignment that accompanies
      this OPO. As an example, we will create a simple schema with five
      tables. Since we find that students often have some difficulty in
      understand how 'foreign keys' and intermediate tables work, you will also do a
      little exercise with INSERT INTO on this new schema.
    </p>

    <h2>Clients for PostgreSQL</h2>.
    <p>
      As you know, you never address a database server (such as PostgreSQL)
      directly. All communication is through a client. We used
      pgAmin until now. Which is open source, free and also very suitable
      for what we want to do. However, there are a lot of alternative clients:
    </p>
    <ul>
      <li>Open source: DBeaver, SQuirrel, SQL Workbench/J, ...</li>
      
      <li>
        Gesloten: DbVisualizer, Valentina Studio, Jetbrains
        DataGrip, Navicat, DBSchema, ...
      </li>
    </ul>
    <p>We are now introduced to a commercial software tool: DBSchema.</p>

<h2>Presenting DBS schedule</h2>
<p>
  DBSchema is an <em>advanced database management tool</em>. It can
  handle a lot of different DBMS: MySQL, PostgreSQL, Oracle, SQL
  Server, Sqlite, etc. There is a so-called 'Free Community Edition' and
  a 'Pro Edition'.
</p>
    <figure class="center">
      <img src="../../assets/DBSchema/editions.png" alt="">
    </figure>
    <p>
      For a lot of things we want to do, the free version is sufficient,
      whereas in the paid version there are some things that
      might be useful for working out a larger task.
    </p>
    <p>
      When you install DBSchema, you get the full
      version for free. <em>
        Therefore, we prefer to wait as long as possible to install this software
        install, until you start the big assignment
      </em>. After these two weeks, you can ask to extend the trial period of the pro
      version for another two weeks as explained at <a href="https://dbschema.com/evaluate.html">https://dbschema.com/evaluate.html</a>.
    </p>

    <section class="taak">
  
  
        <button>Show / hide solution</button>
        
      
</section>

    <p>
      DBSchema has <a href="https://dbschema.com/documentation/">a good documentation</a>. By the way, we are only using a limited portion of all the
      features of this client software.
    </p>

    <h2>To "reverse engineer" a diagram </h2>
        <p>
          Usually we use DBSchema as follows: you draw a physical model and
          DBSchema generates all the SQL code to build this model in PostgreSQL on
          the server.
        </p>
        <p>
          But it can also be done in reverse. In this piece, we show how to use DBSchema <em>
            reverse engineer an existing schema on our database server.
          </em>. That is to say that DBSchema connects to the existing
          schema and reconstructs a physical model from it.
        </p>
    <section class="info">
      <p>
        In <a href="../SQL_eenopveel/index-2.html#Vertaling-naar-relationeel-model">the chapter 'One-to-many relationships'
        </a>you built a small model (consisting of two tables
        'Training Component' and 'Lecturer') in the schema named your
        r-number, in the database of your sequence. Now check through
        pgAdmin whether that schema is indeed there? If not: create it
        create <a href="../SQL_eenopveel/index-2.html#Realisatie-in-je-eigen-schema">via the steps in that section</a> (ten minutes of work).
      </p>
    </section>

    <p>
      With the following roadmap, you will have DBSchema connect to our
      database server and have this client convert your schema to a physical model.
      As always: perform these steps yourself!
    </p>

    <p>
      The following video how to import an existing schema into DBSchema and
      how to change some settings afterwards. Below the movie are the
      specific steps you need to take. You might find the combination
      movie-step-by-step plan ideal? Just watch the movie first and then read the
      steps in the assignment one by one and perform them?
    </p>
    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_5fo4uvcg&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_wg0x65f7" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <section class="taak">
  <div>
        <p>
          My lector code (and thus the name of my scheme) is 'u0012047'.
          Of course, in the following, replace this with your own
          r-number.
        </p>
        <ol>
          <li>
            Start pgAdmin and use the pooling connection to go to the database of
            your series and in this to your schema. In my case I see that my
            schema 'u0012047' contains the desired tables 'lecturer' and
            'course section':
            <figure class="center">
              <img src="../../assets/DBSchema/Mijnschema.png" width="300" alt="">
            </figure>
            <p>
              Just a quick test that these tables contain data: <pre><code>SELECT *
FROM u0012047.opleidingsonderdeel; --en analoog met de tabel lector</code></pre>
            </p>
          </li>
          <li>
            So that looks good. Time to start DBSchema. On the
            opening page, choose 'Start New Project' with the option
            Connect to Database'. This can also be done from the menu, by the way: 'Model &gt;
            New connected to the database.
            <figure class="center">
              <img src="../../assets/DBSchema/startnewproject.png" width="500" alt="">
            </figure>
          </li>
          <li>
            DBSchema can handle dozens of DBMS. Choose from the list the
            by now familiar elephant:
            <figure class="center">
              <img src="../../assets/DBSchema/kiespostgres.png" width="500" alt="">
            </figure>
          </li>
          <li>
            In the next dialog box, under 'JDBC URL', choose the option
            'Standard'. Then fill in the details further as shown in the
            screenshot. As 'Database User', choose the local user you
            created for the pooling connection and corresponding password (where
            we use in <a href="../../NL/SQL_pgadmin/index.html#Installatie-pgAdmin">the manual</a> about told "save this password in a .txt file"). Obviously
            choose <em>for the pooling connection the correct number</em>: the
            screenshot shows the version of academic year 2022-23. At
            'Database' you should probably type the name of the database of your
            series <em>type</em> (e.g. 1TI9 etc).
            <figure class="center">
              <img src="../../assets/DBSchema/connectiedialoog.png" alt="">
            </figure>
          </li>
          <li>
            In the 'Settings' tab, under 'Connection Properies' <code>prepareThreshold=0;</code>:
            <figure class="center">
              <img src="../../assets/DBSchema/preparethreshold.png" alt="">
            </figure>
          </li>
          <li>
            Now you can confirm this window with "Connect. If all goes well,
            you will see the contents of the database. Now select only the
            schema that you want to reverse engineer:
            <figure class="center">
              <img src="../../assets/DBSchema/checkboxes.png" width="400" alt="">
            </figure>
          </li>
          <li>
            This is the result in DBSchema:
                        <figure class="center">
              <img src="../../assets/DBSchema/resultaatMet.png" alt="">
            </figure>
          </li>
          <li>
            There are some things we don't want:<ul>
              <li>The comment box 'This is a layout ...';</li>
              <li>the rectangle 'lector';</li>
              <li>the table 'internet prices';</li>
            </ul>
            <p>
              You can "drop" the first two (layout and rectangle). If you do that
              to the table 'internet prices', <em>
                that table is effectively deleted on the server, so here
                rather choose 'exclude from layout
              </em> when right-clicking on this table.
            </p>
          </li>
        </ol>
      </div>
  
        <button>Show / hide solution</button>
        
      
</section>

    <h2>DBSchema for executing SQL queries</h2>
    <p>
      You can, of course, use DBSchema in the same way as pgAdmin,
      for running queries, as the following video shows:
    </p>
    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_1o8pwuf2&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_5zk0j2ca" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <h2>Building a physical model in DBSchema</h2>.
    <p>
      'Reverse Engineering' is a fine tool to have, but what we usually
      want is the reverse: <em>
        draw a physical model and build it on the database server</em>. We'll look at that in this section. Again, a do-text, as you
      used to from us by now.
    </p>
    <p>
      The example below (from a movie database) is not only an
      illustration of the steps to take in DBSchema, but we will
      also use it to once again walk through all the steps of a larger task
      through:
    </p>
    <ul>
      <li>problem description;</li>
      <li>conceptual model;</li>
      <li>logical model;</li>
      <li>physical model;</li>
      <li>add data;</li>
    </ul>

    <h3>Description of a movie database</h3>.
    
    <p>
      You're a movie buff and want to keep track of all the movies you've watched in a
      database. A movie has a title, year of release and a
      length in minutes.
    </p>
    <p>
      We will assume for a moment, for didactic reasons, that each film has only one
      director (<a href="https://en.wikipedia.org/wiki/Adil_El_Arbi_and_Bilall_Fallah">which, of course, is sometimes not the case</a>). You keep a director's name, nationality and date of birth.
      You also want to give your film a rating (integer from 0 to 5).
    </p>
    <p>
      Several actors may star in each film. An actor also has a
      name, nationality, date of birth and gender (M, V or X). If an actor
      plays in a movie, we also like to keep track of the name of the character that
      the actor played in this movie. If an actor played multiple roles in
      the movie, all the names come one after the other, separated by commas.
    </p>

    <h3>Conceptual model</h3>
    <p>
      We chose in the "modeling" section to think about possible natural primary keys already in the conceptual phase.
      thinking about possible natural primary keys. This need not
      have to be: there are also methodologies that do not think about primary keys until the logical model.
      primary keys. Is a movie title unique in this respect?
      Presumably not, as a lot of <a href="https://www.imdb.com/list/ls023094975/">remakes</a> demonstrate. Film title and year then? Or film title and director? In order to
      for simplicity, we simply choose a film_id (just as you
      as a student also have a unique r-number).
    </p>
    <p>
      For actor and director we make the same choice. We can start with
      compound keys to begin with, but that makes things a little
      more difficult ...
    </p>

    <section class="taak">
  <p>
        Draw yourself a possible conceptual model for this film database. What
        are the entity types? Attributes? Relationships?
      </p>
  
        <button>Show / hide solution</button>
        <div class="oplossing">
        <p>
          As entity types, you undoubtedly recognize: film, actor and director,
          each with a number of attributes. An actor's relationship to a
          film "plays in," and a director directs a film. The conceptual
          model can thus look like this:
        </p>
        <figure class="center">
          <img src="../../assets/DBSchema/filmconceptueel.svg" alt="">
        </figure>
        <p>
          Probably the only difficult thing in this model is the attribute 'role'
          of the relationship between 'Actor' and 'Movie'. If you were to make this an attribute of
          the entity type 'Actor', then each actor can only play one role
          play ...
        </p>
        <p>
          As for the <em>cardinalities</em>, there is some debate. Are
          an actor even if you haven't played in a single movie? Ditto for
          director. In our simplified show, each film has exactly 1
          director.
        </p>
      </div>
      
</section>

    <h3>Logical model</h3>
    <p>
      For the logic model, we decide that this database is in a <em>relational data model.
        relational data model
      </em> will be created. The choice of which DBMS exactly (MySQL, PostgreSQL,
      Oracle, ...) is for later.
    </p>
    <p>
      In this step, we think about tables and types of relationships between the
      different tables.
    </p>

    <section class="taak">
  <p>
        Create a logical model for this task. Think about tables, keys
        and types of relationships.
      </p>
  
        <button>Show / hide solution</button>
        <div class="oplossing">
        <p>
          The relationship between film and director is a <em>one-to-many relationship</em>. Each film has precisely one director, but a director may have directed (zero
            or) have directed multiple films.
        </p>
        <p>
          The relationship between film and actor is a <em>many-to-many relationship</em>.
          Every movie has zero or more actors, every actor plays in zero or
          multiple films. You know from <a href="../../NL/model_logical/index.html">the chapter on logical modeling</a>that a many-to-many relationship must be modeled with a <em>tusset table</em>.
        </p>
        <figure class="center">
          <img src="../../assets/DBSchema/filmlogisch.svg" alt="">
        </figure>
      </div>
      
</section>

    <h3>Physical model</h3>
    <p>
      Finally, in the last modeling step, we decide to concretely use PostgreSQL
      so that we can also define the appropriate data types and
      build the model on the database server. In this step, the tool
      DBSchema comes in handy.
    </p>
    <p>As always: a step-by-step / do-text ...</p>

    <h4>Create schema</h4>.
    <p>
      In the professional (paid) version of DBSchema, you can first offline
      design a model, save it, and only then synchronize it with the
      database. In the free version, a schema must first exist on the RDBMS
      and you cannot save the model offline. This is actually hardly an
      objection for the larger task you get for this OPO, so we explain
      this method.
    </p>

    <section class="taak">
  <div>
        <p>
          First, create a new schema in your group's database (1TI9 etc.).
          To do this, start pgAdmin and use the pooling connection to create a schema in the appropriate
          database to create a schema named 'rxxxxxxx-movie' (using your own r-number).
          you obviously use your own r-number). <a href="../../NL/SQL_intro/index-2.html#Create schema">You remember how to create a new schema in a database?
          </a>
        </p>
        <p>
          You may get an error message (<code>syntax error at or near "-"</code>) if you do not remember to enclose the schema name in double
          quotation marks. This is usually not necessary, but because of
          the special character '-' in the name, double quotes are
          mandatory. If you had written the name of the schema with 'underscore' (_)
          then you were allowed to omit them.
        </p>
      </div>
  
        <button>Show / hide solution</button>
        
      
</section>

    <h4>In DBSchema connect to this schema</h4>.
    
    <p>
      We already did this at the beginning of the chapter, see <a href="#One-scheme-'reverse-engineering'">'reverse engineering'</a>. Select the schema you just created!
    </p>

    <h4>Draw model in DBSchema</h4>.
    
    <p>
      We now start from the logic diagram as the basis for the physical model.
      <em>We draw that physical model using DBSchema</em>. Simultaneously with the
      drawing, DBSchema builds the model on the database server in the schema.
    </p>
    <section class="taak">
  <p>
        Now follow the steps in the videos below and implement them yourself in your
        own schedule.
      </p>
  
        <button>Show / hide solution</button>
        
      
</section>

    <p>
      We first create a schema via the pooling connection in pgAdmin, connect
      then DBSchema to this schema and draw the first table:
    </p>

    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_73nuo2nt&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_qwf46ftf" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <p>Define tables 'actor' and 'movie':</p>
    
    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_9tlct9ku&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_qlaxq1bw" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <p>
      Define the intermediate table and make all relationships between the tables
      explicit by transferring keys:
    </p>
    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_ubrg89tk&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_g5u2olpg" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <p>In the end, you end up with this physical model:</p>
    
    <figure class="center">
      <img src="../../assets/DBSchema/filmDBresultaat.png" alt="">
    </figure>

    <h4>Creating customizations in DBSCheme</h4>.
    
    <p>
      You can modify the tables at any time in DBSchema e.g. by
      double-clicking them. As an example, we add in two tables an
      extra condition (<code>CONSTRAINT</code>) in two tables:
    </p>
    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_tm9dffkt&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_a0fsbu2s" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <h4>Query and save SQL code for the entire schema</h4>.
    <p>
      When you draw the physical model, DBSchema sends SQL commands to the
      database server. By the way, you can see those on the left side of the DBSchema
      window, under the "SQL History" section.
    </p>
    <p>
      You can have the entire SQL code generated at once via the menu choice
      'Schema &gt; Export Schema and data (F2)':
    </p>

    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_pxkfkl13&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_rru61a7e" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <p>
      You then obtain a number of <code>CREATE</code> statements in this style:
    </p>
    <p>
      <pre><code>CREATE SCHEMA IF NOT EXISTS &quot;u0012047-film&quot;;

CREATE  TABLE &quot;u0012047-film&quot;.acteur (
  id                   integer  NOT NULL  ,
  naam                 varchar(60)  NOT NULL  ,
  geboortedatum        date  NOT NULL  ,
  nationaliteit        char(2)    ,
  geslacht             char(1)    ,
  CONSTRAINT pk_acteur PRIMARY KEY ( id )
);

CREATE  TABLE &quot;u0012047-film&quot;.regisseur (
  id                   integer  NOT NULL  ,
  naam                 varchar(60)  NOT NULL  ,
  geboortedatum        date    ,
  nationaliteit        char(2)  NOT NULL  ,
  CONSTRAINT pk_regisseur PRIMARY KEY ( id )
);

CREATE  TABLE &quot;u0012047-film&quot;.film (
  id                   integer  NOT NULL  ,
  titel                varchar(100)  NOT NULL  ,
  jaar                 integer  NOT NULL  ,
  lengte               integer  NOT NULL  ,
  rating               integer    ,
  regisseur_id         integer  NOT NULL  ,
  CONSTRAINT pk_film PRIMARY KEY ( id ),
  CONSTRAINT fk_film_regisseur FOREIGN KEY ( regisseur_id )
      REFERENCES &quot;u0012047-film&quot;.regisseur( id )
);

ALTER TABLE &quot;u0012047-film&quot;.film ADD CONSTRAINT cns_film_rating CHECK ( rating between 0 and 5 );

CREATE  TABLE &quot;u0012047-film&quot;.acteur_film (
  film_id              integer  NOT NULL  ,
  acteur_id            integer  NOT NULL  ,
  rol                  varchar(50)  NOT NULL  ,
  CONSTRAINT pk_acteur_film PRIMARY KEY ( film_id, acteur_id ),
  CONSTRAINT fk_acteur_film_acteur FOREIGN KEY ( acteur_id )
      REFERENCES &quot;u0012047-film&quot;.acteur( id )   ,
  CONSTRAINT fk_acteur_film_film FOREIGN KEY ( film_id )
      REFERENCES &quot;u0012047-film&quot;.film( id )
);</code></pre>
    </p>

    <section class="info">
      <p>
        Study this code carefully. Look especially at the <code>CONSTRAINT</code> statements.
        <em>
          Save this code in a text file, with extension .sql or .txt. This
          file allows you, in pgAdmin, to create the entire schema at once.
          create.
        </em>
      </p>
      <p>
        In the code, there is an <code>ALTER TABLE</code> statement. There is nothing
        wrong with that, but it's a little nicer if you put what comes after the <code>ADD</code>
        comes just add in the <code>CREATE</code> of the table 'movie'. For some
        some reason DBSchema always does it through a <code>ALTER TABLE</code>.
      </p>
    </section>
    <h2>Filling database with data</h2>
    <h3>Manual with INSERT INTO</h3>
    <p>
      You add rows to a table via <code>INSERT INTO</code> statements. <a href="../../NL/SQL_intro/index-2.html#Data-add-with-INSERT-INTO">You already did this in the introductory SQL chapter.</a>
    </p>

    <section class="taak">
  <div>
        <p>
          Start pgAdmin and manually add the following information. The movie 'Star
          Wars' was released in 1977. The film has a length of 121 minutes and
          was directed by George Lucas (born May 14, 1944). George
          Walton Lucas Jr. hails from Modesto, California, US. Harrison
          Ford (Chicago, US, born July 13, 1942) plays the role of Han
          Solo. The role of Princess Leia was for American actress Carrie
          Frances Fisher (born October 21, 1956, died in 2016). From me
          this movie 5 stars!
        </p>
        <figure class="center">
          <img src="../../assets/DBSchema/starwars.jpg" alt="">
        </figure>
        <p>
          In a query tool in pgAdmin, add this information to your schema.
          This is a slow way to add data, but it is a
          good starting point. After all, it lets you think about exactly what data you
          should add in what order.
        </p>
      </div>
  
        <button>Show / hide solution</button>
        <div class="oplossing">
        <p>Add the two actors:</p>
        
        <pre><code>INSERT INTO &quot;u0012047-film&quot;.acteur VALUES (1,&#39;Harrison Ford&#39;,&#39;1942-07-13&#39;,&#39;US&#39;,&#39;M&#39;);
-- ipv altijd de naam van het schema te vermelden had je ook het search_path goed kunnen zetten
INSERT INTO &quot;u0012047-film&quot;.acteur VALUES (2,&#39;Carrie Fisher&#39;,&#39;1956-10-21&#39;,&#39;US&#39;,&#39;V&#39;);</code></pre>
        <p>Then the director:</p>
        
        <pre><code>INSERT INTO &quot;u0012047-film&quot;.regisseur VALUES (1,&#39;George Lucas&#39;,&#39;1944-05-14&#39;,&#39;US&#39;);</code></pre>

        <p>Now we can populate the movie table:</p>
        
        <pre><code>INSERT INTO &quot;u0012047-film&quot;.film VALUES (1,&#39;Star Wars&#39;,1977,121,5,1);</code></pre>

        <p>
          Finally, the intermediate table can be completed so that we link
          between actors and movies:
        </p>
        <pre><code>INSERT INTO &quot;u0012047-film&quot;.acteur_film VALUES (1,1,&#39;Han Solo&#39;);
INSERT INTO &quot;u0012047-film&quot;.acteur_film VALUES (1,2,&#39;Prinses Leia&#39;);</code></pre>
      </div>
      
</section>

    <h3>Via a CSV file</h3>.
    
    <p>
      Always typing code with <code>INSERT INTO ... VALUES ...</code> is rather tedious.
      In <a href="../../NL/SQL_CSV/index.html">the chapter on CSV files</a> we looked at a
      <em>faster alternative</em> via importing a CSV file. Such a CSV file
      can best be typed into a spreadsheet (Excel, Libre Office, Numbers, ...) and
      then convert it to CSV. Of course, it remains manual work, but if you want a
      small but good dataset it is justifiable.
    </p>

    <h3>Automatic data generation through a site</h3>
    
    <p>
      If you want to test your schedule with hundreds of films, directors and thousands of
      actors, you need to move away from manually typing in information. If
      you are really lucky you will find a dataset about movies, directors and
      actors and you can start from that, omit columns, change columns, etc.
    </p>
    <p>Most of the time you're not that lucky ...</p>


    <p>
      You want realistic-looking data to test well. The actors
      don't have to actually exist, as long as there is a string that can
      be a name, a possible date of birth, etc.
    </p>
    <p>
      To generate this kind of test data, there is of course
      software. As an example, let's take a look at the website <a href="https://mockaroo.com/">https://mockaroo.com</a>. In the free version, you can have up to 1,000 rows generated per table.
    </p>
    <p>
      The "actor" and "director" tables are easy, because they depend on
      no other table. As an example, the following
      video shows how to generate 1000 rows for the table 'actor'.
    </p>
    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_7mxqk1fr&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_zapznca5" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>

    <p>
      The other two tables ('movie' and 'actor_film') are a bit more difficult
      because they depend on other tables via a strange key (FK, blue
      arrow in the diagram). The table 'movie' is still relatively easy to
      provide data. Each movie has a number of classic columns and a
      column 'director_id'. This last column is a 'foreign key' because it
      refers to a column that is a 'primary key' in another table (viz.
      the table 'director'). Suppose you already have 100 directors (= rows in the table
      'director'), then chances are that you gave them as id
      a number from 1 to 100. So you can have the column 'director_id' be a
      random integer from 1 to 100 to be generated.
    </p>
    <p>
      For the intermediate table 'actor_film' you can do something similar. Suppose that
      You have 100 movies and 500 actors. For 'film_id' you generate in Mockaroo
      a random integer from 1 to 100 and for 'actor_id' idem, but up to 500.
      but up to 500. But now comes the problem: the combination of
      'movie_id' and 'actor_id' is a <em>compound primary key</em>.
      So that means that <em>the combination of both values must be unique</em>. However, if you let Mockaroo generate 1000 combinations for both values
      generate, you will notice that almost certainly some combinations appear more than
      occur once. As a result, the <code>INSERT INTO</code> statements
      that you extract from Mockaroo will give an error when you paste them and execute them
      in pgAdmin. <em>Nothing will be entered</em>. Fortunately, in
      pgAdmin you will see the error message from the DBMS indicating in which line
      where the error occurs. You can delete that line, redo everything
      in pgAdmin, delete the next duplicate line, etc. A bit annoying
      but doable.
    </p>

    <h3>Automatic data generation in DBS scheme</h3>
    <p>
      In the paid version of DBSchema (that is, you get the first two weeks after installation on a
      trial for the first two weeks after installation and can extend for another two weeks afterwards) has a data generator
      a data generator. It works similarly to Mockaroo. The
      big difference is that DBSchema does connect to the database and those
      <em>can execute generated inserts automatically</em>.
    </p>
    <p>
      And just this feature makes <em>inserting intermediate tables</em> here
      a lot nicer than in tools like Mockaroo. In Mockaroo, you still had to see for yourself
      what the primary keys of 'actor' and 'director' were (numbers from 1
      to ...). <em>
        However, DBSchema knows what the primary keys are and will randomly choose one
        of them.
      </em> With intermediate tables, the same thing happens. Again, it will then inevitably
      occur that it will generate a combination of actor and movie that already
      exists in the database. However, DBSchema continues to generate further rows until the
      desired number is reached. Doubles are simply not added to the
      database and the generator simply skips this combination.
    </p>

    <p>
      We show the data generation in DBSCheme. If you can't choose the menu item 'data
      generator' cannot be selected, then you have the free community edition of
      DBSchema. You may then be able to use a form on the DBSchema site to
      apply for additional two-week pro version.
    </p>

    <div class="iframewrapper kaltura">
  <iframe class="preview-iframe" src="https://cdnapisec.kaltura.com/p/2375821/sp/237582100/embedIframeJs/uiconf_id/43066731/partner_id/2375821?iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_6gntge3t&amp;flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[hotspots.plugin]=1&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&amp;wid=1_5o8l3k81" width="1280" height="720" allowfullscreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
</div>
  </main>

    <footer>
      <div class="container">
        <p>
          <img src="../../assets/Logo_UCLL_negatief_RGB.png" width="100" height="53" alt="Logo UCLL Hogeschool"><br>&copy; 2023 — Steven Engels, Jan Van Hee
        </p>
        <p><a href="#top">&uarr; Go to top</a></p>
      </div>
    </footer>
    <script src="../../assets/js/func2.js"></script>
  </body>

<!-- Mirrored from df.webontwerp.ucll.be/EN/SQL_DBschema/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Dec 2023 15:09:20 GMT -->
</html>